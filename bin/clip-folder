#!/bin/bash -eu

# args not equal 2
if [ "$#" -lt 2 ]; then
  echo "Usage: $0 <prompt> <folder>"
  exit 1
fi

prompt="$1"
norm="$(echo "$2" | sed 's|/$||')"

echo 'file,'"$prompt"

docker run -it --gpus all -v bash_clip_cache:/root/.cache -v "$norm":/workspace/images bash-clip python3 logit.py "$prompt" \
| sed 's|^|'"$norm"'/|'
